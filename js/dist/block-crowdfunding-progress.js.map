{"version":3,"sources":["../src/block-crowdfunding-progress.js"],"names":["registerBlockType","wp","blocks","InspectorControls","blockEditor","components","RangeControl","PanelBody","title","pronamic_crowdfunding_progress","icon","category","parent","attributes","color","type","default","value","styles","name","label","label_donut","isDefault","label_bar","edit","setAttributes","className","degrees","negativeClass","onChangeValue","classes","indexOf","isStyleDonut","barStyle","fillStyle","subClasses","borderColor","transform","Math","min","toFixed","background","width","save","undefined"],"mappings":"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","sourcesContent":["/* globals pronamic_crowdfunding_progress */\nconst { registerBlockType } = wp.blocks;\nconst { InspectorControls } = wp.blockEditor;\nconst { RangeControl, PanelBody } = wp.components;\n\n( function () {\n\t'use strict';\n\n\t/**\n\t * Register progress block type.\n\t *\n\t * @param string name     Block name.\n\t * @param object settings Block settings.\n\t *\n\t * @return WPBlock        Block if registered successfully, otherwise \"undefined\".\n\t */\n\tregisterBlockType( 'pronamic-pay/crowdfunding-progress', {\n\t\ttitle: pronamic_crowdfunding_progress.title,\n\t\ticon: 'marker',\n\t\tcategory: 'pronamic-pay',\n\t\tparent: [ 'pronamic-pay/crowdfunding-donut', 'pronamic-pay/crowdfunding-bar', 'pronamic-pay/crowdfunding-compact', 'core/column', 'core/group' ],\n\n\t\t// Attributes.\n\t\tattributes: {\n\t\t\tcolor: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: '#f9461c'\n\t\t\t},\n\t\t\tvalue: {\n\t\t\t\ttype: 'integer',\n\t\t\t\tdefault: 0\n\t\t\t}\n\t\t},\n\n\t\tstyles: [\n\t\t\t{\n\t\t\t\tname: 'donut',\n\t\t\t\tlabel: pronamic_crowdfunding_progress.label_donut,\n\t\t\t\tisDefault: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'bar',\n\t\t\t\tlabel: pronamic_crowdfunding_progress.label_bar,\n\t\t\t}\n\t\t],\n\n\t\t// Edit.\n\t\tedit: ( { attributes, setAttributes, className } ) => {\n\t\t\tlet { color, value } = attributes;\n\n\t\t\tlet degrees = 0;\n\n\t\t\tlet negativeClass = '';\n\n\t\t\tconst onChangeValue = ( value ) => {\n\t\t\t\tsetAttributes( { value: value } );\n\n\t\t\t\tif ( value > 50 ) {\n\t\t\t\t\tnegativeClass = ' ppcf-circle--50';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tonChangeValue( value );\n\n\t\t\t// Classes.\n\t\t\tlet classes = className;\n\n\t\t\tif ( className.indexOf( 'is-style' ) < 0) {\n\t\t\t\tclasses += ' is-style-donut';\n\t\t\t}\n\n\t\t\tlet isStyleDonut = classes.indexOf( 'is-style-donut' ) > -1;\n\n\t\t\tlet barStyle = {};\n\t\t\tlet fillStyle = {};\n\t\t\tlet subClasses = '';\n\n\t\t\tif ( isStyleDonut ) {\n\t\t\t\tlet degrees = ( value / 100 ) * 360;\n\n\t\t\t\tbarStyle = {\n\t\t\t\t\tborderColor: color,\n\t\t\t\t\ttransform: 'rotate( ' + Math.min( degrees, 360 ).toFixed( 2 ) + 'deg )'\n\t\t\t\t};\n\n\t\t\t\tif ( value > 50 ) {\n\t\t\t\t\tfillStyle = {\n\t\t\t\t\t\tborderColor: color,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tsubClasses = 'ppcf-circle' + negativeClass;\n\t\t\t} else {\n\t\t\t\tbarStyle = {\n\t\t\t\t\tbackground: color,\n\t\t\t\t\twidth: Math.min( value,  100 ) + '%'\n\t\t\t\t};\n\n\t\t\t\tsubClasses = 'ppcf-progress';\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className={ classes }>\n\t\t\t\t\t{\n\t\t\t\t\t\tisStyleDonut ?\n\t\t\t\t\t\t\t<div className={ subClasses }>\n\t\t\t\t\t\t\t\t<span className=\"ppcf-circle__label\">{ value }%</span>\n\n\t\t\t\t\t\t\t\t<div className=\"ppcf-circle__slice\">\n\t\t\t\t\t\t\t\t\t<div className=\"ppcf-circle__slice__bar\" style={ barStyle }></div>\n\t\t\t\t\t\t\t\t\t<div className=\"ppcf-circle__slice__fill\" style={ fillStyle }></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<div className={ subClasses }>\n\t\t\t\t\t\t\t\t<div className=\"ppcf-progress__bar\" style={ barStyle }>\n\t\t\t\t\t\t\t\t\t<span className=\"ppcf-progress__bar__status\">\n\t\t\t\t\t\t\t\t\t\t{ value }%\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t);\n\t\t},\n\n\t\t// Save.\n\t\tsave: ( { attributes } ) => {\n\t\t\tlet className = attributes.className === undefined ? '' : attributes.className ;\n\t\t\tlet { color, value } = attributes;\n\n\t\t\t// Classes.\n\t\t\tlet classes = className;\n\n\t\t\tif ( className.indexOf( 'is-style' ) < 0 ) {\n\t\t\t\tclasses += 'is-style-donut';\n\t\t\t}\n\n\t\t\tlet isStyleDonut = classes.indexOf( 'is-style-donut' ) > -1;\n\n\t\t\tlet barStyle = {};\n\t\t\tlet fillStyle = {};\n\t\t\tlet subClasses = '';\n\n\t\t\tif ( isStyleDonut ) {\n\t\t\t\tlet degrees = ( value / 100 ) * 360;\n\n\t\t\t\tbarStyle = {\n\t\t\t\t\tborderColor: color,\n\t\t\t\t\ttransform: 'rotate( ' + Math.min( degrees, 360 ).toFixed( 2 ) + 'deg )'\n\t\t\t\t};\n\n\t\t\t\tsubClasses = 'ppcf-circle';\n\n\t\t\t\tif ( value > 50 ) {\n\t\t\t\t\tsubClasses += ' ppcf-circle--50';\n\n\t\t\t\t\tfillStyle = {\n\t\t\t\t\t\tborderColor: color,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbarStyle = {\n\t\t\t\t\tbackground: color,\n\t\t\t\t\twidth: Math.min( value, 100 ) + '%'\n\t\t\t\t};\n\n\t\t\t\tsubClasses = 'ppcf-progress';\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className={ classes }>\n\t\t\t\t\t{\n\t\t\t\t\t\tisStyleDonut ?\n\t\t\t\t\t\t\t<div className={ subClasses }>\n\t\t\t\t\t\t\t\t<span className=\"ppcf-circle__label\">{ value }%</span>\n\n\t\t\t\t\t\t\t\t<div className=\"ppcf-circle__slice\">\n\t\t\t\t\t\t\t\t\t<div className=\"ppcf-circle__slice__bar\" style={ barStyle }></div>\n\t\t\t\t\t\t\t\t\t<div className=\"ppcf-circle__slice__fill\" style={ fillStyle }></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<div className={ subClasses }>\n\t\t\t\t\t\t\t\t<div className=\"ppcf-progress__bar\" style={ barStyle }>\n\t\t\t\t\t\t\t\t\t<span className=\"ppcf-progress__bar__status\">\n\t\t\t\t\t\t\t\t\t\t{ value }%\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t} );\n} )();\n"],"file":"block-crowdfunding-progress.js"}