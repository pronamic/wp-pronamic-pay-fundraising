{"version":3,"sources":["../src/block-crowdfunding-progress.js"],"names":["registerBlockType","wp","blocks","InspectorControls","blockEditor","components","RangeControl","PanelBody","title","pronamic_crowdfunding_progress","icon","category","parent","attributes","value","type","default","styles","name","label","label_donut","isDefault","label_bar","edit","setAttributes","className","degrees","negativeClass","onChangeValue","classes","indexOf","isStyleDonut","style","subClasses","transform","toFixed","width","save","undefined"],"mappings":";;AAAA;IACQA,iB,GAAsBC,EAAE,CAACC,M,CAAzBF,iB;IACAG,iB,GAAsBF,EAAE,CAACG,W,CAAzBD,iB;qBAC4BF,EAAE,CAACI,U;IAA/BC,Y,kBAAAA,Y;IAAcC,S,kBAAAA,S;;AAEtB,CAAE,YAAY;AACb;AAEA;;;;;;;;;AAQAP,EAAAA,iBAAiB,CAAE,oCAAF,EAAwC;AACxDQ,IAAAA,KAAK,EAAEC,8BAA8B,CAACD,KADkB;AAExDE,IAAAA,IAAI,EAAE,QAFkD;AAGxDC,IAAAA,QAAQ,EAAE,cAH8C;AAIxDC,IAAAA,MAAM,EAAE,CAAE,iCAAF,EAAqC,+BAArC,EAAsE,mCAAtE,EAA2G,aAA3G,EAA0H,YAA1H,CAJgD;AAMxD;AACAC,IAAAA,UAAU,EAAE;AACXC,MAAAA,KAAK,EAAE;AACNC,QAAAA,IAAI,EAAE,SADA;AAENC,QAAAA,OAAO,EAAE;AAFH;AADI,KAP4C;AAcxDC,IAAAA,MAAM,EAAE,CACP;AACCC,MAAAA,IAAI,EAAE,OADP;AAECC,MAAAA,KAAK,EAAEV,8BAA8B,CAACW,WAFvC;AAGCC,MAAAA,SAAS,EAAE;AAHZ,KADO,EAMP;AACCH,MAAAA,IAAI,EAAE,KADP;AAECC,MAAAA,KAAK,EAAEV,8BAA8B,CAACa;AAFvC,KANO,CAdgD;AA0BxD;AACAC,IAAAA,IAAI,EAAE,oBAAgD;AAAA,UAA5CV,UAA4C,QAA5CA,UAA4C;AAAA,UAAhCW,aAAgC,QAAhCA,aAAgC;AAAA,UAAjBC,SAAiB,QAAjBA,SAAiB;AAAA,UAC/CX,KAD+C,GACrCD,UADqC,CAC/CC,KAD+C;AAGrD,UAAIY,OAAO,GAAG,CAAd;AAEA,UAAIC,aAAa,GAAG,EAApB;;AAEA,UAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAEd,KAAF,EAAa;AAClCU,QAAAA,aAAa,CAAE;AAAEV,UAAAA,KAAK,EAAEA;AAAT,SAAF,CAAb;AAEAY,QAAAA,OAAO,GAAKZ,KAAK,GAAG,GAAV,GAAkB,GAA5B;;AAEA,YAAKA,KAAK,GAAG,GAAb,EAAmB;AAClBY,UAAAA,OAAO,GAAG,GAAV;AACA;;AAED,YAAKZ,KAAK,GAAG,EAAb,EAAkB;AACjBa,UAAAA,aAAa,GAAG,kBAAhB;AACA;AACD,OAZD;;AAcAC,MAAAA,aAAa,CAAEd,KAAF,CAAb,CArBqD,CAuBrD;;AACA,UAAIe,OAAO,GAAGJ,SAAd;;AAEA,UAAKA,SAAS,CAACK,OAAV,CAAmB,UAAnB,IAAkC,CAAvC,EAA0C;AACzCD,QAAAA,OAAO,IAAI,iBAAX;AACA;;AAED,UAAIE,YAAY,GAAGF,OAAO,CAACC,OAAR,CAAiB,gBAAjB,IAAsC,CAAC,CAA1D;AAEA,UAAIE,KAAK,GAAG,EAAZ;AACA,UAAIC,UAAU,GAAG,EAAjB;;AAEA,UAAKF,YAAL,EAAoB;AACnBC,QAAAA,KAAK,GAAG;AAAEE,UAAAA,SAAS,EAAE,aAAaR,OAAO,CAACS,OAAR,CAAiB,CAAjB,CAAb,GAAoC;AAAjD,SAAR;AAEAF,QAAAA,UAAU,GAAG,gBAAgBN,aAA7B;AACA,OAJD,MAIO;AACN,YAAIS,KAAK,GAAKtB,KAAK,GAAG,GAAR,GAAc,GAAd,GAAoBA,KAAlC;AAEAkB,QAAAA,KAAK,GAAG;AAAEI,UAAAA,KAAK,EAAEA,KAAK,GAAG;AAAjB,SAAR;AAEAH,QAAAA,UAAU,GAAG,eAAb;AACA;;AAED;AAAA;AACC;AAAK,UAAA,SAAS,EAAGJ;AAAjB,WAEEE,YAAY;AAAA;AACX;AAAK,UAAA,SAAS,EAAGE;AAAjB;AAAA;AACC;AAAM,UAAA,SAAS,EAAC;AAAhB,WAAuCnB,KAAvC,MADD;AAAA;AAGC;AAAK,UAAA,SAAS,EAAC;AAAf;AAAA;AACC;AAAK,UAAA,SAAS,EAAC,yBAAf;AAAyC,UAAA,KAAK,EAAGkB;AAAjD,UADD;AAAA;AAEC;AAAK,UAAA,SAAS,EAAC;AAAf,UAFD,CAHD,CADW;AAAA;AAUX;AAAK,UAAA,SAAS,EAAGC;AAAjB;AAAA;AACC;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAoC,UAAA,KAAK,EAAGD;AAA5C;AAAA;AACC;AAAM,UAAA,SAAS,EAAC;AAAhB,WACGlB,KADH,MADD,CADD,CAZH;AADD;AAuBA,KAjGuD;AAmGxD;AACAuB,IAAAA,IAAI,EAAE,qBAAsB;AAAA,UAAlBxB,UAAkB,SAAlBA,UAAkB;AAC3B,UAAIY,SAAS,GAAGZ,UAAU,CAACY,SAAX,KAAyBa,SAAzB,GAAqC,EAArC,GAA0CzB,UAAU,CAACY,SAArE,CAD2B,CAG3B;;AACA,UAAII,OAAO,GAAGJ,SAAd;;AAEA,UAAKA,SAAS,CAACK,OAAV,CAAmB,UAAnB,IAAkC,CAAvC,EAA2C;AAC1CD,QAAAA,OAAO,IAAI,gBAAX;AACA;;AAED,UAAIE,YAAY,GAAGF,OAAO,CAACC,OAAR,CAAiB,gBAAjB,IAAsC,CAAC,CAA1D;AAEA,UAAIE,KAAK,GAAG,EAAZ;AACA,UAAIC,UAAU,GAAG,EAAjB;;AAEA,UAAKF,YAAL,EAAoB;AACnB,YAAIL,OAAO,GAAKb,UAAU,CAACC,KAAX,GAAmB,GAArB,GAA6B,GAA3C;;AAEA,YAAKY,OAAO,GAAG,GAAf,EAAqB;AACpBA,UAAAA,OAAO,GAAG,GAAV;AACA;;AAEDM,QAAAA,KAAK,GAAG;AAAEE,UAAAA,SAAS,EAAE,aAAaR,OAAO,CAACS,OAAR,CAAiB,CAAjB,CAAb,GAAoC;AAAjD,SAAR;AAEAF,QAAAA,UAAU,GAAG,aAAb;;AAEA,YAAKpB,UAAU,CAACC,KAAX,GAAmB,EAAxB,EAA6B;AAC5BmB,UAAAA,UAAU,IAAI,kBAAd;AACA;AACD,OAdD,MAcO;AACN,YAAIG,KAAK,GAAKvB,UAAU,CAACC,KAAX,GAAmB,GAAnB,GAAyB,GAAzB,GAA+BD,UAAU,CAACC,KAAxD;AAEAkB,QAAAA,KAAK,GAAG;AAAEI,UAAAA,KAAK,EAAEA,KAAK,GAAG;AAAjB,SAAR;AAEAH,QAAAA,UAAU,GAAG,eAAb;AACA;;AAED;AAAA;AACC;AAAK,UAAA,SAAS,EAAGJ;AAAjB,WAEEE,YAAY;AAAA;AACX;AAAK,UAAA,SAAS,EAAGE;AAAjB;AAAA;AACC;AAAM,UAAA,SAAS,EAAC;AAAhB,WAAuCpB,UAAU,CAACC,KAAlD,MADD;AAAA;AAGC;AAAK,UAAA,SAAS,EAAC;AAAf;AAAA;AACC;AAAK,UAAA,SAAS,EAAC,yBAAf;AAAyC,UAAA,KAAK,EAAGkB;AAAjD,UADD;AAAA;AAEC;AAAK,UAAA,SAAS,EAAC;AAAf,UAFD,CAHD,CADW;AAAA;AAUX;AAAK,UAAA,SAAS,EAAGC;AAAjB;AAAA;AACC;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAoC,UAAA,KAAK,EAAGD;AAA5C;AAAA;AACC;AAAM,UAAA,SAAS,EAAC;AAAhB,WACGnB,UAAU,CAACC,KADd,MADD,CADD,CAZH;AADD;AAuBA;AAhKuD,GAAxC,CAAjB;AAkKA,CA7KD","sourcesContent":["/* globals pronamic_crowdfunding_progress */\nconst { registerBlockType } = wp.blocks;\nconst { InspectorControls } = wp.blockEditor;\nconst { RangeControl, PanelBody } = wp.components;\n\n( function () {\n\t'use strict';\n\n\t/**\n\t * Register progress block type.\n\t *\n\t * @param string name     Block name.\n\t * @param object settings Block settings.\n\t *\n\t * @return WPBlock        Block if registered successfully, otherwise \"undefined\".\n\t */\n\tregisterBlockType( 'pronamic-pay/crowdfunding-progress', {\n\t\ttitle: pronamic_crowdfunding_progress.title,\n\t\ticon: 'marker',\n\t\tcategory: 'pronamic-pay',\n\t\tparent: [ 'pronamic-pay/crowdfunding-donut', 'pronamic-pay/crowdfunding-bar', 'pronamic-pay/crowdfunding-compact', 'core/column', 'core/group' ],\n\n\t\t// Attributes.\n\t\tattributes: {\n\t\t\tvalue: {\n\t\t\t\ttype: 'integer',\n\t\t\t\tdefault: 0\n\t\t\t}\n\t\t},\n\n\t\tstyles: [\n\t\t\t{\n\t\t\t\tname: 'donut',\n\t\t\t\tlabel: pronamic_crowdfunding_progress.label_donut,\n\t\t\t\tisDefault: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'bar',\n\t\t\t\tlabel: pronamic_crowdfunding_progress.label_bar,\n\t\t\t}\n\t\t],\n\n\t\t// Edit.\n\t\tedit: ( { attributes, setAttributes, className } ) => {\n\t\t\tlet { value } = attributes;\n\n\t\t\tlet degrees = 0;\n\n\t\t\tlet negativeClass = '';\n\n\t\t\tconst onChangeValue = ( value ) => {\n\t\t\t\tsetAttributes( { value: value } );\n\n\t\t\t\tdegrees = ( value / 100 ) * 360;\n\n\t\t\t\tif ( value > 100 ) {\n\t\t\t\t\tdegrees = 360;\n\t\t\t\t}\n\n\t\t\t\tif ( value > 50 ) {\n\t\t\t\t\tnegativeClass = ' ppcf-circle--50';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tonChangeValue( value );\n\n\t\t\t// Classes.\n\t\t\tlet classes = className;\n\n\t\t\tif ( className.indexOf( 'is-style' ) < 0) {\n\t\t\t\tclasses += ' is-style-donut';\n\t\t\t}\n\n\t\t\tlet isStyleDonut = classes.indexOf( 'is-style-donut' ) > -1;\n\n\t\t\tlet style = {};\n\t\t\tlet subClasses = '';\n\n\t\t\tif ( isStyleDonut ) {\n\t\t\t\tstyle = { transform: 'rotate( ' + degrees.toFixed( 2 ) + 'deg )' };\n\n\t\t\t\tsubClasses = 'ppcf-circle' + negativeClass;\n\t\t\t} else {\n\t\t\t\tlet width = ( value > 100 ? 100 : value );\n\n\t\t\t\tstyle = { width: width + '%' };\n\n\t\t\t\tsubClasses = 'ppcf-progress';\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className={ classes }>\n\t\t\t\t\t{\n\t\t\t\t\t\tisStyleDonut ?\n\t\t\t\t\t\t\t<div className={ subClasses }>\n\t\t\t\t\t\t\t\t<span className=\"ppcf-circle__label\">{ value }%</span>\n\n\t\t\t\t\t\t\t\t<div className=\"ppcf-circle__slice\">\n\t\t\t\t\t\t\t\t\t<div className=\"ppcf-circle__slice__bar\" style={ style }></div>\n\t\t\t\t\t\t\t\t\t<div className=\"ppcf-circle__slice__fill\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<div className={ subClasses }>\n\t\t\t\t\t\t\t\t<div className=\"ppcf-progress__bar\" style={ style }>\n\t\t\t\t\t\t\t\t\t<span className=\"ppcf-progress__bar__status\">\n\t\t\t\t\t\t\t\t\t\t{ value }%\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t);\n\t\t},\n\n\t\t// Save.\n\t\tsave: ( { attributes } ) => {\n\t\t\tlet className = attributes.className === undefined ? '' : attributes.className ;\n\n\t\t\t// Classes.\n\t\t\tlet classes = className;\n\n\t\t\tif ( className.indexOf( 'is-style' ) < 0 ) {\n\t\t\t\tclasses += 'is-style-donut';\n\t\t\t}\n\n\t\t\tlet isStyleDonut = classes.indexOf( 'is-style-donut' ) > -1;\n\n\t\t\tlet style = {};\n\t\t\tlet subClasses = '';\n\n\t\t\tif ( isStyleDonut ) {\n\t\t\t\tlet degrees = ( attributes.value / 100 ) * 360;\n\n\t\t\t\tif ( degrees > 360 ) {\n\t\t\t\t\tdegrees = 360;\n\t\t\t\t}\n\n\t\t\t\tstyle = { transform: 'rotate( ' + degrees.toFixed( 2 ) + 'deg )' };\n\n\t\t\t\tsubClasses = 'ppcf-circle';\n\n\t\t\t\tif ( attributes.value > 50 ) {\n\t\t\t\t\tsubClasses += ' ppcf-circle--50';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet width = ( attributes.value > 100 ? 100 : attributes.value );\n\n\t\t\t\tstyle = { width: width + '%' };\n\n\t\t\t\tsubClasses = 'ppcf-progress';\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className={ classes }>\n\t\t\t\t\t{\n\t\t\t\t\t\tisStyleDonut ?\n\t\t\t\t\t\t\t<div className={ subClasses }>\n\t\t\t\t\t\t\t\t<span className=\"ppcf-circle__label\">{ attributes.value }%</span>\n\n\t\t\t\t\t\t\t\t<div className=\"ppcf-circle__slice\">\n\t\t\t\t\t\t\t\t\t<div className=\"ppcf-circle__slice__bar\" style={ style }></div>\n\t\t\t\t\t\t\t\t\t<div className=\"ppcf-circle__slice__fill\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<div className={ subClasses }>\n\t\t\t\t\t\t\t\t<div className=\"ppcf-progress__bar\" style={ style }>\n\t\t\t\t\t\t\t\t\t<span className=\"ppcf-progress__bar__status\">\n\t\t\t\t\t\t\t\t\t\t{ attributes.value }%\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t} );\n} )();\n"],"file":"block-crowdfunding-progress.js"}