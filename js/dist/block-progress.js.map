{"version":3,"sources":["../src/block-progress.js"],"names":["registerBlockType","wp","blocks","InspectorControls","blockEditor","components","RangeControl","PanelBody","title","icon","category","parent","attributes","value","type","default","styles","name","label","isDefault","edit","setAttributes","className","degrees","negativeClass","onChangeValue","style","transform","inspectorControls","classes","save"],"mappings":"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","sourcesContent":["const { registerBlockType } = wp.blocks;\nconst { InspectorControls } = wp.blockEditor;\nconst { RangeControl, PanelBody } = wp.components;\n\n( function () {\n\t'use strict';\n\n\t/**\n\t * Register ring block type.\n\t *\n\t * @param string name     Block name.\n\t * @param object settings Block settings.\n\t *\n\t * @return WPBlock        Block if registered successfully, otherwise \"undefined\".\n\t */\n\tregisterBlockType( 'pronamic-pay/progress', {\n\t\ttitle: 'Progress',\n\t\ticon: 'marker',\n\t\tcategory: 'pronamic-pay',\n\t\tparent: [ 'pronamic-pay/crowdfunding-ring' ],\n\n\t\t// Attributes.\n\t\tattributes: {\n\t\t\tvalue: {\n\t\t\t\ttype: 'integer',\n\t\t\t\tdefault: 0\n\t\t\t}\n\t\t},\n\n\t\tstyles: [\n\t\t\t{\n\t\t\t\tname: 'ring',\n\t\t\t\tlabel: 'Ring',\n\t\t\t\tisDefault: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'bar',\n\t\t\t\tlabel: 'Bar'\n\t\t\t}\n\t\t],\n\n\t\t// Edit.\n\t\tedit( { attributes, setAttributes, className } ) {\n\t\t\tlet { value } = attributes;\n\n\t\t\tlet degrees = 0;\n\n\t\t\tlet negativeClass = '';\n\n\t\t\tconst onChangeValue = ( value ) => {\n\t\t\t\tsetAttributes( { value: value } );\n\n\t\t\t\tdegrees = ( value / 100 ) * 360;\n\n\t\t\t\tif ( value > 50 ) {\n\t\t\t\t\tnegativeClass = 'ppd-circle--50';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tonChangeValue( value );\n\n\t\t\tlet style = {\n\t\t\t\ttransform: 'rotate( ' + degrees + 'deg )'\n\t\t\t};\n\n\t\t\t// Inspector controls.\n\t\t\tconst inspectorControls = (\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody>\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel=\"Percentage\"\n\t\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\t\tonChange={ onChangeValue }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t);\n\n\t\t\tlet classes = className + ' ppd-circle ' + negativeClass;\n\n\t\t\treturn (\n\t\t\t\t<div className={ classes }>\n\t\t\t\t\t<span className=\"ppd-circle__label\">{ value }%</span>\n\n\t\t\t\t\t<div className=\"ppd-circle__slice\">\n\t\t\t\t\t\t<div className=\"ppd-circle__slice__bar\" style={ style }></div>\n\t\t\t\t\t\t<div className=\"ppd-circle__slice__fill\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t},\n\n\t\t// Save.\n\t\tsave( { attributes } ) {\n\t\t\tlet degrees = ( attributes.value / 100 ) * 360;\n\n\t\t\tlet classes = 'ppd-circle';\n\n\t\t\tif ( attributes.value > 50 ) {\n\t\t\t\tclasses += ' ppd-circle--50';\n\t\t\t}\n\n\t\t\tlet style = {\n\t\t\t\ttransform: 'rotate( ' + degrees + 'deg )'\n\t\t\t};\n\n\t\t\treturn (\n\t\t\t\t<div className={ classes }>\n\t\t\t\t\t<span className=\"ppd-circle__label\">{ attributes.value }%</span>\n\n\t\t\t\t\t<div className=\"ppd-circle__slice\">\n\t\t\t\t\t\t<div className=\"ppd-circle__slice__bar\" style={ style }></div>\n\t\t\t\t\t\t<div className=\"ppd-circle__slice__fill\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t} );\n} )();\n"],"file":"block-progress.js"}